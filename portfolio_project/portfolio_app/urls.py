# portfolio_project/portfolio_app/urls.py

from django.urls import path, include
from rest_framework.routers import DefaultRouter
# MODIFIED: Import the new custom_ai_model_view
from .views import ProjectViewSet, health_check, gemini_chat_view, custom_ai_model_view
from django.views.decorators.csrf import csrf_exempt

# Create a router and register our viewsets with it.
router = DefaultRouter()
router.register(r'projects', ProjectViewSet) # Register the ProjectViewSet at the 'projects' endpoint

app_name = 'portfolio_app' # Define app_name for namespacing URLs (still good practice)

urlpatterns = [
    # Health check endpoint
    path('health/', health_check, name='health_check'),
    # Include the API URLs generated by the router
    path('api/', include(router.urls)),
    # API endpoint for the Gemini chatbot
    path('api/chat/', csrf_exempt(gemini_chat_view), name='gemini_chat'),
    # NEW: API endpoint for the custom AI model (placeholder for future training)
    path('api/custom-ai-model/', csrf_exempt(custom_ai_model_view), name='custom_ai_model'),
]
